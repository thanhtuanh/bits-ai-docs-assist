<div class="upload-container">
  <h1 class="title">🤖 AI Document Assistant</h1>

  <!-- Datei-Upload Sektion -->
  <div class="upload-card">
    <h2>📄 Dokument hochladen</h2>
    <input 
      type="file" 
      class="file-input" 
      (change)="onFileSelected($event)"
      accept=".pdf,.txt,.doc,.docx">
    
    <div class="file-info" *ngIf="selectedFile">
      <span>📎 {{ selectedFile.name }}</span>
      <span>{{ (selectedFile.size / 1024 / 1024).toFixed(2) }} MB</span>
    </div>

    <button 
      class="upload-btn" 
      (click)="uploadDocument()" 
      [disabled]="!selectedFile || isProcessing">
      {{ isProcessing ? '⏳ Analysiere...' : '🚀 Dokument analysieren' }}
    </button>
  </div>

  <!-- Text-Analyse Sektion -->
  <div class="upload-card">
    <h2>✍️ Text direkt analysieren</h2>
    <textarea 
      class="text-input" 
      [(ngModel)]="inputText" 
      placeholder="Fügen Sie hier Ihren Text ein, den Sie analysieren möchten..."
      maxlength="5000">
    </textarea>
    
    <div class="char-counter">
      {{ inputText.length }}/5000 Zeichen
    </div>

    <button 
      class="upload-btn" 
      (click)="analyzeText()" 
      [disabled]="!inputText.trim() || isProcessing">
      {{ isProcessing ? '⏳ Analysiere...' : '🔍 Text analysieren' }}
    </button>
  </div>

  <!-- Fortschritt -->
  <div class="progress-section" *ngIf="isProcessing">
    <h3>🔄 Analyse läuft...</h3>
    <p>Bitte warten Sie, während Ihr Dokument analysiert wird.</p>
    <div class="progress-bar">
      <div class="progress-fill"></div>
    </div>
  </div>

  <!-- Fehler-Anzeige -->
  <div class="error-card" *ngIf="uploadError">
    <div class="error-content">
      <strong>❌ Fehler:</strong>
      <p>{{ uploadError }}</p>
    </div>
  </div>

  <!-- Analyse-Ergebnisse -->
  <div class="results-section" *ngIf="analysisResult && !isProcessing">
    <h3>📊 Analyse-Ergebnis</h3>

    <!-- Zusammenfassung -->
    <div class="result-card" *ngIf="analysisResult.summary">
      <h4>📝 Zusammenfassung</h4>
      <p>{{ analysisResult.summary }}</p>
    </div>

    <!-- Schlüsselwörter -->
    <div class="result-card" *ngIf="analysisResult.keywords?.length">
      <h4>🔍 Schlüsselwörter</h4>
      <ul>
        <li *ngFor="let keyword of analysisResult.keywords">{{ keyword }}</li>
      </ul>
    </div>

    <!-- Technologie-Empfehlungen -->
    <div class="result-card" *ngIf="analysisResult.suggestedComponents?.length">
      <h4>💻 Technologie-Empfehlungen</h4>
      <ul>
        <li *ngFor="let tech of analysisResult.suggestedComponents">{{ tech }}</li>
      </ul>
    </div>

    <!-- Einfaches Feedback -->
    <div class="simple-feedback">
      <h4>💬 War diese Analyse hilfreich?</h4>
      <div class="feedback-buttons">
        <button class="btn-helpful" (click)="submitQuickFeedback(true)">
          👍 Ja, hilfreich
        </button>
        <button class="btn-not-helpful" (click)="submitQuickFeedback(false)">
          👎 Nicht hilfreich
        </button>
      </div>
    </div>
  </div>

  <!-- Info-Box -->
  <div class="info-box">
    <h3>ℹ️ Unterstützte Funktionen</h3>
    <ul>
      <li>📄 Dokument-Upload (PDF, TXT, DOC, DOCX)</li>
      <li>✍️ Direkte Text-Analyse</li>
      <li>📝 Automatische Zusammenfassung</li>
      <li>🔍 Schlüsselwort-Extraktion</li>
      <li>💻 Technologie-Empfehlungen</li>
    </ul>
  </div>
</div>

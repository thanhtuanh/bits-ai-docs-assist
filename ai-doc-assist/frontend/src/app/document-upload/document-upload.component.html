<div class="upload-container">
  <h1 class="title">ğŸ¤– AI Document Assistant</h1>

  <!-- Tab Navigation -->
  <div class="tab-navigation">
    <button 
      class="tab-button" 
      [class.active]="activeTab === 'upload'"
      (click)="setActiveTab('upload')">
      ğŸ“„ Dokument Upload
    </button>
    <button 
      class="tab-button" 
      [class.active]="activeTab === 'text'"
      (click)="setActiveTab('text')">
      âœï¸ Text Analyse
    </button>
  </div>

  <!-- Tab Content -->
  <div class="tab-content">
    
    <!-- Datei-Upload Tab -->
    <div class="tab-panel" *ngIf="activeTab === 'upload'">
      <div class="upload-card">
        <h2>ğŸ“„ Dokument hochladen</h2>
        <p class="tab-description">Laden Sie PDF, DOC, TXT oder andere Dokumente hoch fÃ¼r eine automatische Analyse.</p>
        
        <input 
          type="file" 
          class="file-input" 
          (change)="onFileSelected($event)"
          accept=".pdf,.txt,.doc,.docx,.csv,.json,.md"
          #fileInput>
        
        <div class="file-info" *ngIf="selectedFile">
          <div class="file-details">
            <span class="file-name">ğŸ“ {{ selectedFile.name }}</span>
            <span class="file-size" [class.error]="selectedFile.size === 0">
              {{ formatFileSize(selectedFile.size) }}
            </span>
            <span class="file-type">{{ getFileTypeDisplay(selectedFile.type) }}</span>
          </div>
          <div class="file-status" *ngIf="selectedFile.size === 0" class="warning">
            âš ï¸ Warnung: Datei scheint leer zu sein
          </div>
          <div class="file-actions">
            <button class="clear-btn" (click)="clearFile(fileInput)">
              ğŸ—‘ï¸ Datei entfernen
            </button>
          </div>
        </div>

        <div class="upload-buttons">
          <button 
            class="upload-btn" 
            (click)="uploadDocument()" 
            [disabled]="!selectedFile || isProcessing || selectedFile.size === 0">
            {{ isProcessing ? 'â³ Analysiere...' : 'ğŸš€ Dokument analysieren' }}
          </button>
        </div>

        <!-- UnterstÃ¼tzte Formate Info -->
        <div class="supported-formats">
          <h4>ğŸ“‹ UnterstÃ¼tzte Formate:</h4>
          <div class="format-tags">
            <span class="format-tag">PDF</span>
            <span class="format-tag">TXT</span>
            <span class="format-tag">DOC</span>
            <span class="format-tag">DOCX</span>
            <span class="format-tag">CSV</span>
            <span class="format-tag">JSON</span>
            <span class="format-tag">MD</span>
          </div>
          <p class="format-note">Maximale DateigrÃ¶ÃŸe: 10 MB</p>
        </div>
      </div>
    </div>

    <!-- Text-Analyse Tab -->
    <div class="tab-panel" *ngIf="activeTab === 'text'">
      <div class="upload-card">
        <h2>âœï¸ Text direkt analysieren</h2>
        <p class="tab-description">FÃ¼gen Sie Text direkt ein fÃ¼r eine sofortige Analyse ohne Datei-Upload.</p>
        
        <textarea 
          class="text-input" 
          [(ngModel)]="inputText" 
          placeholder="FÃ¼gen Sie hier Ihren Text ein, den Sie analysieren mÃ¶chten...

Beispiele:
â€¢ Technische Dokumentation
â€¢ Projektbeschreibungen  
â€¢ Anforderungsdokumente
â€¢ Code-Kommentare
â€¢ Meeting-Notizen"
          maxlength="5000">
        </textarea>
        
        <div class="text-info">
          <div class="char-counter" [class.warning]="inputText.length > 4500">
            {{ inputText.length }}/5000 Zeichen
          </div>
          <div class="text-actions">
            <button class="clear-btn" (click)="clearText()" *ngIf="inputText.length > 0">
              ğŸ—‘ï¸ Text lÃ¶schen
            </button>
            <button class="sample-btn" (click)="loadSampleText()">
              ğŸ“ Beispieltext laden
            </button>
          </div>
        </div>

        <button 
          class="upload-btn" 
          (click)="analyzeText()" 
          [disabled]="!inputText.trim() || isProcessing">
          {{ isProcessing ? 'â³ Analysiere...' : 'ğŸ” Text analysieren' }}
        </button>

        <!-- Text-Analyse Features -->
        <div class="text-features">
          <h4>ğŸ” Text-Analyse Features:</h4>
          <ul>
            <li>ğŸ“ Automatische Zusammenfassung</li>
            <li>ğŸ” SchlÃ¼sselwort-Extraktion</li>
            <li>ğŸ’» Technologie-Empfehlungen</li>
            <li>ğŸ“Š Sentiment-Analyse</li>
            <li>ğŸ¯ KomplexitÃ¤tsbewertung</li>
          </ul>
        </div>
      </div>
    </div>
  </div>

  <!-- Fortschritt (fÃ¼r beide Tabs) -->
  <div class="progress-section" *ngIf="isProcessing">
    <h3>ğŸ”„ Analyse lÃ¤uft...</h3>
    <p>Bitte warten Sie, wÃ¤hrend {{ activeTab === 'upload' ? 'Ihr Dokument' : 'Ihr Text' }} analysiert wird.</p>
    <div class="progress-bar">
      <div class="progress-fill"></div>
    </div>
  </div>

  <!-- Fehler-Anzeige (fÃ¼r beide Tabs) -->
  <div class="error-card" *ngIf="uploadError">
    <div class="error-content">
      <strong>âŒ Fehler:</strong>
      <p>{{ uploadError }}</p>
      <button class="retry-btn" (click)="clearError()">ğŸ”„ Erneut versuchen</button>
    </div>
  </div>

  <!-- Analyse-Ergebnisse (fÃ¼r beide Tabs) -->
  <div class="results-section" *ngIf="analysisResult && !isProcessing">
    <div class="results-header">
      <h3>ğŸ“Š Analyse-Ergebnis</h3>
      <div class="result-source">
        <span class="source-badge" *ngIf="activeTab === 'upload'">ğŸ“„ Dokument</span>
        <span class="source-badge" *ngIf="activeTab === 'text'">âœï¸ Text</span>
      </div>
    </div>

    <!-- Zusammenfassung -->
    <div class="result-card" *ngIf="analysisResult.summary">
      <h4>ğŸ“ Zusammenfassung</h4>
      <p>{{ analysisResult.summary }}</p>
    </div>

    <!-- SchlÃ¼sselwÃ¶rter -->
    <div class="result-card" *ngIf="analysisResult.keywords?.length">
      <h4>ğŸ” SchlÃ¼sselwÃ¶rter</h4>
      <div class="keyword-tags">
        <span class="keyword-tag" *ngFor="let keyword of analysisResult.keywords">{{ keyword }}</span>
      </div>
    </div>

    <!-- Technologie-Empfehlungen -->
    <div class="result-card" *ngIf="analysisResult.suggestedComponents?.length">
      <h4>ğŸ’» Technologie-Empfehlungen</h4>
      <div class="tech-recommendations">
        <span class="tech-tag" *ngFor="let tech of analysisResult.suggestedComponents">{{ tech }}</span>
      </div>
    </div>

    <!-- Einfaches Feedback -->
    <div class="simple-feedback">
      <h4>ğŸ’¬ War diese Analyse hilfreich?</h4>
      <div class="feedback-buttons">
        <button class="btn-helpful" (click)="submitQuickFeedback(true)">
          ğŸ‘ Ja, hilfreich
        </button>
        <button class="btn-not-helpful" (click)="submitQuickFeedback(false)">
          ğŸ‘ Nicht hilfreich
        </button>
      </div>
    </div>

    <!-- Aktionen -->
    <div class="result-actions">
      <button class="action-btn" (click)="exportResults()">
        ğŸ’¾ Ergebnis exportieren
      </button>
      <button class="action-btn" (click)="startNewAnalysis()">
        ğŸ”„ Neue Analyse
      </button>
    </div>
  </div>
</div>
